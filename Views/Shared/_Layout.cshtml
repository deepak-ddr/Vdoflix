<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - RovoFlix</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body class="theme-dark">
    <header class="topnav">
        <div class="container d-flex align-items-center justify-content-between py-2">
            <div class="brand d-flex align-items-center gap-3">
                <a class="logo" asp-controller="Home" asp-action="Index">RovoFlix</a>
                <nav class="d-none d-md-flex gap-3">
                    <a class="nav-link" asp-controller="Home" asp-action="Index">Home</a>
                    <a class="nav-link" href="#">TV Shows</a>
                    <a class="nav-link" href="#">Movies</a>
                    <a class="nav-link" href="#">New & Popular</a>
                    <a class="nav-link" href="#">My List</a>
                </nav>
            </div>
            <div class="actions d-flex align-items-center gap-3">
                <a class="btn btn-sm btn-outline-light" asp-controller="Profiles" asp-action="Index">
                    @{
                        var pid = Context.Session.GetInt32("ProfileId");
                        var initial = pid.HasValue ? $"P{pid.Value}" : "Profile";
                    }
                    @initial
                </a>
                <form class="d-none d-md-block" method="get" asp-controller="Search" asp-action="Index">
                    <div class="input-group input-group-sm">
                        <input name="q" class="form-control" placeholder="Search" />
                        <button class="btn btn-outline-light"><i class="bi bi-search"></i></button>
                    </div>
                </form>
                <i class="bi bi-bell d-none d-md-inline"></i>
                @if (User.Identity?.IsAuthenticated == true)
                {
                    <form asp-controller="Account" asp-action="Logout" method="post">
                        <button class="btn btn-sm btn-outline-light">Sign out</button>
                    </form>
                }
                else
                {
                    <a class="btn btn-sm btn-outline-light" asp-controller="Account" asp-action="Login">Sign in</a>
                }
            </div>
        </div>
    </header>
    <main role="main">
        @RenderBody()
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    @await Html.PartialAsync("_LoginPartial")
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
